{% include "head.html" %}
<h1 class="text-4xl">
    <span class="font-semibold">Languages</span>
</h1>
<div class="mt-3">
    <div class="rounded shadow" style="width: 100%; height: 500px;" id="map">
    </div>
</div>
<div class="mt-5">
    <div class="grid">
        {% for lang in langs %}
        <a href="/languages/{{ lang.id }}">
        <div class="grid-row" style="border-color: #{{ lang.color }};">
            <div>{{ lang.name }} <span class="font-thin">[{{ lang.id }}]</span></div>
            <div>
                {{ lang.clade }}
            </div>
            <div>
                {{ lang.lat }}, {{ lang.long }}
            </div>
            <div>
                {{ lang.lemma_count }} reflexes
            </div>
        </div>
        </a>
        {% endfor %}
    </div>
</div>
<script>
var map = L.map('map').setView([20.5937, 78.9629], 4);

L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: US National Park Service',
	maxZoom: 8
}).addTo(map)
{% for lang in langs %}
var iconSvg = `{{ lang.to_map_marker() | safe }}`
var iconUrl = 'data:image/svg+xml;base64,' + btoa(iconSvg)
var icon = L.icon( {
            iconUrl: iconUrl,
            iconSize: [15, 15]
        } );
L.marker([{{ lang.lat }}, {{ lang.long }}], {icon: icon}).bindTooltip("<p><strong>{{ lang.name }}</strong></p><p>{{ lang.lemma_count }} reflexes</p>").openTooltip().addTo(map)
{% endfor %}
</script>
{% include "foot.html" %}